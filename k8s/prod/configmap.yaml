# ConfigMap - 生产环境非敏感配置
# 所有微服务已合并到 foundation_service，统一配置管理
apiVersion: v1
kind: ConfigMap
metadata:
  name: crm-python-config
  namespace: default
  labels:
    app: crm-python
    environment: production
data:
  # Foundation Service 配置（单体服务，包含所有功能）
  # 数据库配置从 mysql-config ConfigMap 引用（在 deployment 中配置）
  FOUNDATION_DB_HOST: "mysql.default.svc.cluster.local"
  FOUNDATION_DB_PORT: "3306"
  FOUNDATION_DB_NAME: "bantu_crm"
  
  # JWT 配置（统一配置）
  FOUNDATION_JWT_ALGORITHM: "HS256"
  FOUNDATION_JWT_EXPIRATION: "86400000"
  FOUNDATION_DEBUG: "false"
  
  # Analytics and Monitoring 配置（已合并到 foundation_service）
  ANALYTICS_METRICS_COLLECTION_INTERVAL: "60"
  ANALYTICS_ALERT_CHECK_INTERVAL: "30"
  ANALYTICS_CPU_THRESHOLD_WARNING: "70.0"
  ANALYTICS_CPU_THRESHOLD_CRITICAL: "85.0"
  ANALYTICS_MEMORY_THRESHOLD_WARNING: "75.0"
  ANALYTICS_MEMORY_THRESHOLD_CRITICAL: "90.0"
  # 邮件和微信通知功能暂时禁用，等待配置完成
  ANALYTICS_ALERT_EMAIL_ENABLED: "false"
  ANALYTICS_ALERT_EMAIL_RECIPIENTS: ""
  
  # CORS 配置（JSON 格式）- 生产环境域名
  CORS_ALLOWED_ORIGINS: '["http://oa.bantuqifu.com","https://oa.bantuqifu.com","https://www.bantuqifu.xin","http://www.bantuqifu.xin","https://www.bantu.sbs","http://www.bantu.sbs","https://www.crmbantu.space","http://www.crmbantu.space","https://crmbantu.space","http://crmbantu.space"]'
  
  # Redis 配置（用于缓存和会话管理）
  REDIS_HOST: "redis.default.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  
  # MongoDB 配置（用于日志和监控）
  MONGO_HOST: "mongodb.default.svc.cluster.local"
  MONGO_PORT: "27017"
  MONGO_DB: "bantu_crm_logs"
  
  # MinIO 配置（用于文件存储）
  MINIO_ENDPOINT: "minio.default.svc.cluster.local"
  
  # 天眼查 API 配置（非敏感配置）
  TIANYANCHA_API_URL: "https://api.tianyancha.com"
  TIANYANCHA_TIMEOUT: "30"
