# ConfigMap - 非敏感配置
apiVersion: v1
kind: ConfigMap
metadata:
  name: crm-python-config
  namespace: default
  labels:
    app: crm-python
data:
  # Foundation Service 配置
  # 数据库配置从 mysql-config ConfigMap 引用（在 deployment 中配置）
  FOUNDATION_DB_HOST: "mysql.default.svc.cluster.local"
  FOUNDATION_DB_PORT: "3306"
  FOUNDATION_DB_NAME: "bantu_crm"
  FOUNDATION_JWT_ALGORITHM: "HS256"
  FOUNDATION_JWT_EXPIRATION: "86400000"
  FOUNDATION_DEBUG: "false"
  
  # Gateway Service 配置
  GATEWAY_JWT_ALGORITHM: "HS256"
  GATEWAY_FOUNDATION_SERVICE_URL: "http://crm-foundation-service:8081"
  GATEWAY_SERVICE_MANAGEMENT_SERVICE_URL: "http://crm-service-management-service:8082"
  GATEWAY_BUSINESS_SERVICE_URL: "http://crm-business-service:8083"
  GATEWAY_WORKFLOW_SERVICE_URL: "http://crm-workflow-service:8084"
  GATEWAY_FINANCE_SERVICE_URL: "http://crm-finance-service:8085"
  GATEWAY_DEBUG: "false"
  
  # Service Management Service 配置
  SERVICE_MANAGEMENT_DEBUG: "false"
  
  # Analytics and Monitoring Service 配置
  ANALYTICS_METRICS_COLLECTION_INTERVAL: "60"
  ANALYTICS_ALERT_CHECK_INTERVAL: "30"
  ANALYTICS_CPU_THRESHOLD_WARNING: "70.0"
  ANALYTICS_CPU_THRESHOLD_CRITICAL: "85.0"
  ANALYTICS_MEMORY_THRESHOLD_WARNING: "75.0"
  ANALYTICS_MEMORY_THRESHOLD_CRITICAL: "90.0"
  # 邮件和微信通知功能暂时禁用，等待配置完成
  ANALYTICS_ALERT_EMAIL_ENABLED: "false"
  ANALYTICS_ALERT_EMAIL_RECIPIENTS: ""
  
  # CORS 配置（JSON 格式）
  CORS_ALLOWED_ORIGINS: '["https://www.bantu.sbs","http://www.bantu.sbs","https://www.crmbantu.space","http://www.crmbantu.space","https://crmbantu.space","http://crmbantu.space","https://168.231.118.179","http://168.231.118.179","http://localhost:3000","http://localhost:5173","http://localhost:8080"]'
  
  # Redis 配置
  REDIS_HOST: "redis.default.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  
  # MinIO 配置
  MINIO_ENDPOINT: "minio.default.svc.cluster.local"


